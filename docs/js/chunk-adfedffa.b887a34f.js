(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-adfedffa"],{"23a7":function(t,e,a){"use strict";a("99af"),a("a623"),a("4160"),a("caad"),a("d81d"),a("13d5"),a("fb6a"),a("a434"),a("b0c0"),a("a9e3"),a("159b");var n=a("2909"),i=a("5530"),l=a("53ca"),o=(a("5803"),a("2677")),s=a("cc20"),u=a("80d2"),r=a("d9bd"),d=a("d9f7");e["a"]=o["a"].extend({name:"v-file-input",model:{prop:"value",event:"change"},props:{chips:Boolean,clearable:{type:Boolean,default:!0},counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,placeholder:String,prependIcon:{type:String,default:"$file"},readonly:{type:Boolean,default:!1},showSize:{type:[Boolean,Number],default:!1,validator:function(t){return"boolean"===typeof t||[1e3,1024].includes(t)}},smallChips:Boolean,truncateLength:{type:[Number,String],default:22},type:{type:String,default:"file"},value:{default:void 0,validator:function(t){return Object(u["w"])(t).every((function(t){return null!=t&&"object"===Object(l["a"])(t)}))}}},computed:{classes:function(){return Object(i["a"])(Object(i["a"])({},o["a"].options.computed.classes.call(this)),{},{"v-file-input":!0})},computedCounterValue:function(){var t=this.isMultiple&&this.lazyValue?this.lazyValue.length:this.lazyValue instanceof File?1:0;if(!this.showSize)return this.$vuetify.lang.t(this.counterString,t);var e=this.internalArrayValue.reduce((function(t,e){var a=e.size,n=void 0===a?0:a;return t+n}),0);return this.$vuetify.lang.t(this.counterSizeString,t,Object(u["o"])(e,1024===this.base))},internalArrayValue:function(){return Object(u["w"])(this.internalValue)},internalValue:{get:function(){return this.lazyValue},set:function(t){this.lazyValue=t,this.$emit("change",this.lazyValue)}},isDirty:function(){return this.internalArrayValue.length>0},isLabelActive:function(){return this.isDirty},isMultiple:function(){return this.$attrs.hasOwnProperty("multiple")},text:function(){var t=this;return this.isDirty?this.internalArrayValue.map((function(e){var a=e.name,n=void 0===a?"":a,i=e.size,l=void 0===i?0:i,o=t.truncateText(n);return t.showSize?"".concat(o," (").concat(Object(u["o"])(l,1024===t.base),")"):o})):[this.placeholder]},base:function(){return"boolean"!==typeof this.showSize?this.showSize:void 0},hasChips:function(){return this.chips||this.smallChips}},watch:{readonly:{handler:function(t){!0===t&&Object(r["b"])("readonly is not supported on <v-file-input>",this)},immediate:!0},value:function(t){var e=this.isMultiple?t:t?[t]:[];Object(u["f"])(e,this.$refs.input.files)||(this.$refs.input.value="")}},methods:{clearableCallback:function(){this.internalValue=this.isMultiple?[]:void 0,this.$refs.input.value=""},genChips:function(){var t=this;return this.isDirty?this.text.map((function(e,a){return t.$createElement(s["a"],{props:{small:t.smallChips},on:{"click:close":function(){var e=t.internalValue;e.splice(a,1),t.internalValue=e}}},[e])})):[]},genControl:function(){var t=o["a"].options.methods.genControl.call(this);return this.hideInput&&(t.data.style=Object(d["b"])(t.data.style,{display:"none"})),t},genInput:function(){var t=o["a"].options.methods.genInput.call(this);return delete t.data.domProps.value,delete t.data.on.input,t.data.on.change=this.onInput,[this.genSelections(),t]},genPrependSlot:function(){var t=this;if(!this.prependIcon)return null;var e=this.genIcon("prepend",(function(){t.$refs.input.click()}));return this.genSlot("prepend","outer",[e])},genSelectionText:function(){var t=this.text.length;return t<2?this.text:this.showSize&&!this.counter?[this.computedCounterValue]:[this.$vuetify.lang.t(this.counterString,t)]},genSelections:function(){var t=this,e=[];return this.isDirty&&this.$scopedSlots.selection?this.internalArrayValue.forEach((function(a,n){t.$scopedSlots.selection&&e.push(t.$scopedSlots.selection({text:t.text[n],file:a,index:n}))})):e.push(this.hasChips&&this.isDirty?this.genChips():this.genSelectionText()),this.$createElement("div",{staticClass:"v-file-input__text",class:{"v-file-input__text--placeholder":this.placeholder&&!this.isDirty,"v-file-input__text--chips":this.hasChips&&!this.$scopedSlots.selection}},e)},genTextFieldSlot:function(){var t=this,e=o["a"].options.methods.genTextFieldSlot.call(this);return e.data.on=Object(i["a"])(Object(i["a"])({},e.data.on||{}),{},{click:function(){return t.$refs.input.click()}}),e},onInput:function(t){var e=Object(n["a"])(t.target.files||[]);this.internalValue=this.isMultiple?e:e[0],this.initialValue=this.internalValue},onKeyDown:function(t){this.$emit("keydown",t)},truncateText:function(t){if(t.length<Number(this.truncateLength))return t;var e=Math.floor((Number(this.truncateLength)-1)/2);return"".concat(t.slice(0,e),"…").concat(t.slice(t.length-e))}}})},2677:function(t,e,a){"use strict";var n=a("8654");e["a"]=n["a"]},5803:function(t,e,a){},f9d7:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.loading?a("v-skeleton-loader",{staticClass:"mb-6",attrs:{type:"list-item-avatar-two-line"}}):t._e(),t.loading?t._e():a("v-file-input",{attrs:{placeholder:"请选择图片",label:"图片","prepend-icon":"mdi-paperclip",loading:t.uploadImg.loading,disabled:t.uploadImg.loading,messages:t.uploadImg.loading?t.uploadImg.infoText[t.uploadImg.activeInfoIndex]:t.uploadImg.activeInfoIndex?t.uploadImg.infoText[t.uploadImg.infoText.length-1]:""},on:{change:t.inputChange},scopedSlots:t._u([{key:"selection",fn:function(e){var n=e.text;return[a("v-chip",{attrs:{small:"",label:"",color:"primary"}},[t._v(t._s(n))])]}}],null,!1,1450644480),model:{value:t.uploadImg.upPhoto,callback:function(e){t.$set(t.uploadImg,"upPhoto",e)},expression:"uploadImg.upPhoto"}}),a("v-row",[a("v-col",{attrs:{cols:"12",md:"4"}},[t.loading?t._l(4,(function(t){return a("v-skeleton-loader",{key:t,staticClass:"mb-6",attrs:{type:"paragraph"}})})):t._e(),t.loading?t._e():a("v-form",{ref:"uploadBox",model:{value:t.uploadBox.form,callback:function(e){t.$set(t.uploadBox,"form",e)},expression:"uploadBox.form"}},[a("v-select",{attrs:{items:t.uploadBox.styleList,rules:t.uploadBox.rules.style,label:"style",required:""},on:{change:t.styleChange},model:{value:t.uploadBox.data.style,callback:function(e){t.$set(t.uploadBox.data,"style",e)},expression:"uploadBox.data.style"}}),a("v-select",{attrs:{items:t.uploadBox.modelNameList,rules:t.uploadBox.rules.modelName,label:"model name",required:""},model:{value:t.uploadBox.data.modelName,callback:function(e){t.$set(t.uploadBox.data,"modelName",e)},expression:"uploadBox.data.modelName"}}),a("v-text-field",{attrs:{type:"number",rules:t.uploadBox.rules.st,label:"start"},model:{value:t.uploadBox.data.st,callback:function(e){t.$set(t.uploadBox.data,"st",e)},expression:"uploadBox.data.st"}}),a("v-text-field",{attrs:{type:"number",rules:t.uploadBox.rules.ed,label:"end"},model:{value:t.uploadBox.data.ed,callback:function(e){t.$set(t.uploadBox.data,"ed",e)},expression:"uploadBox.data.ed"}})],1),a("div",{staticClass:"text-center"},[t.loading?a("v-skeleton-loader",{staticStyle:{display:"inline-block"},attrs:{width:"100",type:"button"}}):a("v-btn",{attrs:{color:"primary",loading:t.uploadBox.loading,disabled:t.uploadImg.loading},on:{click:t.run}},[t._v("run")])],1)],2),a("v-col",{attrs:{cols:"6",md:"4"}},[a("v-img",{attrs:{src:t.uploadImg.url,"max-height":"260",contain:""}})],1),a("v-col",{attrs:{cols:"6",md:"4"}},[a("v-img",{attrs:{src:t.resultGif,"max-height":"260",contain:""}})],1)],1)],1)},i=[],l=(a("a9e3"),a("d4ec")),o=a("bee2"),s=a("262e"),u=a("2caf"),r=a("9ab4"),d=a("60a3"),c=function(t){Object(s["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(l["a"])(this,a),t=e.apply(this,arguments),t.loading=!0,t.uploadImg={upPhoto:void 0,loading:!1,infoText:["启动图片标准化处理程序...","图片微调并生成潜向量...","处理中（此过程大约2~3分钟）...","处理完成！"],activeInfoIndex:0,timer:0,url:""},t.uploadBox={form:!0,data:{style:"smile",modelName:"stylegan_ffhq",st:"3",ed:"-3"},rules:{style:[function(t){return!!t||"style is required"}],modelName:[function(t){return!!t||"model name is required"}],st:[function(e){return!(Math.abs(e-Number(t.uploadBox.data.ed))>6)||"Math.abs(st-ed) < 6"}],ed:[function(e){return!(Math.abs(e-Number(t.uploadBox.data.st))>6)||"Math.abs(st-ed) < 6"}]},styleList:[],modelNameList:[],loading:!1,infoText:["加载框架...","加载模型...","编辑图片..."],activeInfoIndex:0},t.resultGif="",t}return Object(o["a"])(a,[{key:"created",value:function(){this.getSelect()}},{key:"mounted",value:function(){var t=this;setTimeout((function(){t.loading=!1}),2e3)}},{key:"getSelect",value:function(){var t=this;this.$axios.get("/getF",{}).then((function(e){e=e||[[],[]],t.uploadBox.styleList=e[0]||[],t.uploadBox.modelNameList=e[1]||[]}))}},{key:"inputChange",value:function(t){var e=this;if(t&&/^image/.test(t.type)){this.createObjectUrl(t),this.uploadImg.loading=!0,this.uploadImg.activeInfoIndex=0,this.createImgMessage();var a=new FormData;a.append("files",t),this.$axios.post("/up_photo",a,{headers:{"Content-Type":"multipart/form-data"},formData:!0}).then((function(){e.uploadImg.loading=!1})).catch((function(){e.uploadImg.loading=!1}))}}},{key:"createImgMessage",value:function(){var t=this;clearInterval(this.uploadImg.timer),this.uploadImg.timer=setInterval((function(){t.uploadImg.activeInfoIndex>=t.uploadImg.infoText.length-2?clearInterval(t.uploadImg.timer):t.uploadImg.activeInfoIndex++}),3e4)}},{key:"run",value:function(){var t=this;this.uploadBox.loading=!0,this.$refs.uploadBox.validate()?this.$axios.post("/edit_pic",this.uploadBox.data).then((function(e){t.resultGif=t.$tool.getResourceUrl(e+"?time="+(new Date).getTime()),t.uploadBox.loading=!1})).catch((function(){t.uploadBox.loading=!1})):this.uploadBox.loading=!1}},{key:"createObjectUrl",value:function(t){var e=this.uploadImg;if(window.FileReader){var a=new FileReader;a.readAsDataURL(t),a.onload=function(){e.url=this.result}}}},{key:"styleChange",value:function(t){"bald"!=t&&"bangs"!=t&&"wave_hair"!=t||(this.uploadBox.data.modelName="stylegan_ffhq")}}]),a}(d["b"]);c=Object(r["a"])([d["a"]],c);var p=c,h=p,f=a("2877"),m=a("6544"),g=a.n(m),v=a("8336"),x=a("cc20"),y=a("62ad"),b=a("23a7"),I=a("4bd4"),B=a("adda"),S=a("0fd9"),$=a("b974"),k=a("3129"),V=a("8654"),w=Object(f["a"])(h,n,i,!1,null,"73e342d2",null);e["default"]=w.exports;g()(w,{VBtn:v["a"],VChip:x["a"],VCol:y["a"],VFileInput:b["a"],VForm:I["a"],VImg:B["a"],VRow:S["a"],VSelect:$["a"],VSkeletonLoader:k["a"],VTextField:V["a"]})}}]);